<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Records</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        .button {
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Product Records</h1>

    <!-- Form to Add or Update Records -->
    <form id="productForm">
        <input type="hidden" id="editId"> <!-- Hidden input for storing record ID during edit -->
        <label for="productName">Product Name:</label>
        <input type="text" id="productName" name="productName" required><br>

        <label for="description">Description:</label>
        <textarea id="description" name="description" required></textarea><br>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required><br>

        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required><br>

        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" required><br>

        <button type="button" onclick="submitForm()">Submit</button>
    </form>

    <!-- Table to Display Records -->
    <h2>Records</h2>
    <table id="recordsTable">
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Description</th>
                <th>Date</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Amount</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Records will be dynamically inserted here -->
        </tbody>
    </table>

    <script>
        function addRecord(productName, description, date, price, quantity, id) {
            // Calculate amount
            const amount = price * quantity;

            // Create the record object
            const record = {
                Id: id || Date.now(), // Use provided ID or generate a new one
                ProductName: productName,
                Description: description,
                Date: date,
                Price: price,
                Quantity: quantity,
                Amount: amount
            };

            // Retrieve existing records from local storage or initialize an empty array
            let records = JSON.parse(localStorage.getItem('productRecords')) || [];

            // If updating, find and replace the existing record
            if (id) {
                records = records.map(r => r.Id === id ? record : r);
            } else {
                // Add the new record to the records array
                records.push(record);
            }

            // Save the updated records array back to local storage
            localStorage.setItem('productRecords', JSON.stringify(records));

            // Refresh the table
            displayRecords();
        }

        function submitForm() {
            // Get form values
            const productName = document.getElementById('productName').value;
            const description = document.getElementById('description').value;
            const date = document.getElementById('date').value;
            const price = parseFloat(document.getElementById('price').value);
            const quantity = parseInt(document.getElementById('quantity').value, 10);
            const id = document.getElementById('editId').value; // Check if editing

            // Add or update record
            addRecord(productName, description, date, price, quantity, id);

            // Reset the form
            document.getElementById('productForm').reset();
            document.getElementById('editId').value = '';
        }

        function deleteRecord(id) {
            // Retrieve existing records from local storage
            let records = JSON.parse(localStorage.getItem('productRecords')) || [];

            // Filter out the record to delete
            records = records.filter(record => record.Id !== id);

            // Save the updated records array back to local storage
            localStorage.setItem('productRecords', JSON.stringify(records));

            // Refresh the table
            displayRecords();
        }

        function editRecord(id) {
            // Retrieve existing records from local storage
            let records = JSON.parse(localStorage.getItem('productRecords')) || [];
            const record = records.find(record => record.Id === id);

            // Populate form with the record data
            document.getElementById('productName').value = record.ProductName;
            document.getElementById('description').value = record.Description;
            document.getElementById('date').value = record.Date;
            document.getElementById('price').value = record.Price;
            document.getElementById('quantity').value = record.Quantity;
            document.getElementById('editId').value = record.Id;
        }

        function displayRecords() {
            // Retrieve existing records from local storage
            const records = JSON.parse(localStorage.getItem('productRecords')) || [];

            // Get the table body
            const tbody = document.getElementById('recordsTable').getElementsByTagName('tbody')[0];

            // Clear existing rows
            tbody.innerHTML = '';

            // Insert new rows
            records.forEach(record => {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = record.ProductName;
                row.insertCell(1).textContent = record.Description;
                row.insertCell(2).textContent = record.Date;
                row.insertCell(3).textContent = record.Price.toFixed(2);
                row.insertCell(4).textContent = record.Quantity;
                row.insertCell(5).textContent = record.Amount.toFixed(2);

                // Create action buttons
                const actionsCell = row.insertCell(6);
                actionsCell.innerHTML = `
                    <button class="button" onclick="editRecord(${record.Id})">Edit</button>
                    <button class="button" onclick="deleteRecord(${record.Id})">Delete</button>
                `;
            });
        }

        // Initial display of records
        displayRecords();
    </script>
</body>
</html>